# ☕ 커피 주문 앱 (Coffee Order App)

## 1. 프로젝트 개요

### 1.1 프로젝트명

- **커피 주문 앱**

### 1.2 프로젝트 목적

- 사용자가 커피 메뉴를 주문하고, 관리자가 주문을 관리할 수 있는 간단한 **풀스택 웹 앱** 개발

### 1.3 개발 범위

- **주문하기 화면**: 메뉴 선택 및 장바구니 기능
- **관리자 화면**: 재고 관리 및 주문 상태 관리
- **CRUD 기능**: 데이터를 생성, 조회, 수정, 삭제할 수 있는 기능 구현

---

## 2. 기술 스택 (Tech Stack)

| 구분         | 기술                         |
| :----------- | :--------------------------- |
| **Frontend** | HTML, CSS, React, JavaScript |
| **Backend**  | Node.js, Express             |
| **Database** | PostgreSQL                   |

---

## 3. 기본 사항 (Project Guidelines)

- **독립적 개발**: 프런트엔드와 백엔드를 분리하여 따로 개발 진행
- **핵심 기술 집중**: 프레임워크의 부가 기능보다 기본적인 웹 기술 활용에 집중
- **범위 제한**: 학습 목적의 프로젝트이므로 **사용자 인증(로그인)** 및 **결제 기능**은 제외
- **콘텐츠**: 메뉴는 **커피 메뉴**만 포함

---

## 4. 화면 명세 (Screen Specification)

### 4.1. 주문하기 화면

#### 4.1.1. 개요

- 사용자가 메뉴를 보고 장바구니에 담아 주문하는 주 화면입니다.

#### 4.1.2. 화면 구성 요소

1.  **헤더 (Header)**

    - **로고/앱 이름**: 'COZY'가 표시됩니다.
    - **네비게이션**: '주문하기', '관리자' 페이지로 이동할 수 있는 링크가 있습니다. 현재 보고 있는 페이지('주문하기')가 활성화되어 표시됩니다.

2.  **메뉴 목록 (Menu List)**

    - 주문 가능한 모든 커피 메뉴가 카드 형태로 나열됩니다.
    - **메뉴 카드 구성**:
      - **메뉴 이미지**: 메뉴를 시각적으로 보여주는 이미지 영역입니다.
      - **메뉴 이름**: 예: "아메리카노(ICE)"
      - **가격**: 예: "4,000원"
      - **간단한 설명**: 메뉴에 대한 간략한 설명이 표시됩니다.
      - **주문 옵션**:
        - 사용자가 선택할 수 있는 추가 옵션들이 체크박스 형태로 제공됩니다. (예: 샷 추가, 시럽 추가)
        - 각 옵션 옆에는 추가 비용이 표시됩니다. (예: +500원)
      - **'담기' 버튼**: 선택한 옵션과 함께 메뉴를 장바구니에 추가합니다.

3.  **장바구니 (Cart)**
    - 사용자가 '담기' 버튼으로 추가한 메뉴들이 표시되는 영역입니다.
    - **장바구니 항목**:
      - **메뉴 이름 및 선택 옵션**: 예: "아메리카노(ICE) (샷 추가)"
      - **수량**: 동일한 메뉴(옵션 포함)를 여러 번 담았을 경우 수량이 표시됩니다. 예: "X 2"
      - **가격**: 각 항목별 총 가격이 표시됩니다. (기본 가격 + 옵션 가격) \* 수량
    - **총 결제 금액**:
      - 장바구니에 담긴 모든 상품의 합계 금액이 표시됩니다. 예: "총 금액 12,500원"
    - **'주문하기' 버튼**: 장바구니에 담긴 모든 상품을 최종 주문합니다.

### 4.2. 관리자 화면

#### 4.2.1. 개요

- 관리자가 실시간 주문을 확인하고, 메뉴의 재고를 관리하는 화면입니다.

#### 4.2.2. 화면 구성 요소

1.  **헤더 (Header)**

    - **로고/앱 이름**: 'COZY'가 표시됩니다.
    - **네비게이션**: '주문하기', '관리자' 페이지로 이동할 수 있는 링크가 있습니다. 현재 보고 있는 페이지('관리자')가 활성화되어 표시됩니다.

2.  **관리자 대시보드 (Admin Dashboard)**

    - 주문 현황을 요약하여 보여주는 영역입니다.
    - **표시 항목**:
      - **총 주문**: 현재까지 들어온 전체 주문 수
      - **주문 접수**: '주문 접수' 상태의 주문 수
      - **제조 중**: '제조 중' 상태의 주문 수
      - **제조 완료**: '제조 완료' 상태의 주문 수

3.  **재고 현황 (Inventory Status)**

    - 각 메뉴의 재고를 관리하는 영역입니다.
    - **메뉴 카드 구성**:
      - **메뉴 이름**: 예: "아메리카노(ICE)"
      - **현재 재고**: 예: "10개"
      - **수량 조절 버튼**: '+'와 '-' 버튼으로 재고 수량을 1씩 조절할 수 있습니다.

4.  **주문 현황 (Order Status)**
    - 실시간으로 들어온 주문 목록이 시간 순서대로 표시됩니다.
    - **주문 항목 구성**:
      - **주문 시간**: 예: "7월 31일 13:00"
      - **메뉴 정보**: 주문한 메뉴명과 수량이 표시됩니다. 예: "아메리카노(ICE) x 1"
      - **결제 금액**: 해당 주문의 총 금액입니다. 예: "4,000원"
      - **상태 변경 버튼**:
        - 주문의 현재 상태가 버튼에 표시됩니다. (예: '주문 접수')
        - 버튼을 클릭하여 주문 상태를 다음 단계로 변경할 수 있습니다. (주문 접수 → 제조 중 → 제조 완료)

---

## 5. 백엔드 명세 (Backend Specification)

### 5.1. 데이터 모델 (Data Model)

- **Menus**: 커피 이름, 설명, 가격, 이미지, 재고 수량
  - `id`: (Primary Key) 메뉴 고유 ID
  - `name`: (string) 메뉴 이름
  - `description`: (string) 메뉴 설명
  - `price`: (number) 가격
  - `image_url`: (string) 이미지 주소
  - `stock`: (number) 재고 수량
- **Options**: 옵션 이름, 옵션 가격, 연결할 메뉴
  - `id`: (Primary Key) 옵션 고유 ID
  - `name`: (string) 옵션 이름 (예: 샷 추가)
  - `price`: (number) 추가 가격
  - `menu_id`: (Foreign Key) `Menus` 테이블과 연결
- **Orders**: 주문 일시, 주문 내용(메뉴, 수량, 옵션, 금액)
  - `id`: (Primary Key) 주문 고유 ID
  - `created_at`: (timestamp) 주문 일시
  - `total_price`: (number) 총 주문 금액
  - `status`: (string) 주문 상태 (예: '주문 접수', '제조 중', '제조 완료')
- **Order_Items**: 개별 주문 항목을 저장하는 테이블
  - `id`: (Primary Key) 주문 항목 고유 ID
  - `order_id`: (Foreign Key) `Orders` 테이블과 연결
  - `menu_id`: (Foreign Key) `Menus` 테이블과 연결
  - `quantity`: (number) 수량
  - `options`: (JSON or string) 선택한 옵션 목록

### 5.2. 데이터 흐름 (Data Flow)

1.  **메뉴 조회**: 사용자가 '주문하기' 페이지에 접속하면, 프런트엔드는 서버에 메뉴 목록을 요청합니다. 서버는 `Menus`와 `Options` 테이블에서 모든 메뉴 정보를 가져와 프런트엔드에 전달합니다.
2.  **재고 조회**: 사용자가 '관리자' 페이지에 접속하면, 서버는 `Menus` 테이블에서 각 메뉴의 `stock`(재고) 정보를 프런트엔드에 전달합니다.
3.  **주문 생성**: 사용자가 장바구니에서 '주문하기' 버튼을 클릭하면, 프런트엔드는 주문 정보를 서버에 전송합니다. 서버는 다음 작업을 수행합니다.
    - `Orders` 테이블에 새로운 주문(주문 시간, 총 금액, 초기 상태 '주문 접수')을 생성합니다.
    - `Order_Items` 테이블에 해당 주문에 포함된 각 메뉴 항목(수량, 선택 옵션 등)을 저장합니다.
    - 주문된 수량만큼 `Menus` 테이블의 관련 메뉴 `stock`을 감소시킵니다.
4.  **주문 상태 관리**: 관리자가 '주문 현황'에서 주문 상태 변경 버튼을 클릭하면, 프런트엔드는 해당 `order_id`와 새로운 `status`를 서버에 전송합니다. 서버는 `Orders` 테이블에서 해당 주문의 상태를 업데이트합니다.

### 5.3. API 설계 (API Design)

| Method  | Endpoint                 | 설명                                       | Request Body (예시)                   | Response (예시)                                   |
| :------ | :----------------------- | :----------------------------------------- | :------------------------------------ | :------------------------------------------------ |
| `GET`   | `/api/menus`             | 모든 메뉴와 옵션 목록을 가져옵니다.        | 없음                                  | `[{ id, name, price, options: [...] }, ...]`      |
| `GET`   | `/api/orders`            | 모든 주문 목록을 가져옵니다. (관리자용)    | 없음                                  | `[{ id, created_at, items: [...], status }, ...]` |
| `GET`   | `/api/inventory`         | 모든 메뉴의 재고 정보를 가져옵니다.        | 없음                                  | `[{ id, name, stock }, ...]`                      |
| `POST`  | `/api/orders`            | 새로운 주문을 생성합니다.                  | `{ items: [...], totalPrice: 25000 }` | `{ success: true, orderId: 123 }`                 |
| `PATCH` | `/api/orders/:orderId`   | 특정 주문의 상태를 변경합니다.             | `{ status: '제조 중' }`               | `{ success: true, updatedOrder: {...} }`          |
| `PATCH` | `/api/inventory/:menuId` | 특정 메뉴의 재고를 수정합니다. (수동 조절) | `{ stock: 15 }`                       | `{ success: true, updatedItem: {...} }`           |
